---
title: 游戏服务器设计
layout: post
published: true
categories: 
tags: [game, game-dev]
---

近日看到一文章说起游戏数据库怎么设计，mysql？mongodb？这篇文章说，做游戏根本不需要数据库, 直接写一个文件save、load。回想我曾经做过的两个游戏服务器，基本上数据库承担的角色就是Save/Load。

我认为这个观点很有道理，游戏中的关系，尤其是MMO的关系，非常复杂，不是像数据库结构那样的一板一眼的。很多时候和GameObject关系更大一点。所以直接对整个GameWorld进行序列化存储，其实是一个非常简单有效的方法。

可能有人会问了，如果要对数据进行统计，或者GM给某个人发装备怎么办？

如果有业务数据需要统计，这个应该在必要的时候进行统计，这一般发生在游戏外或游戏结束时，比如：注册，充值，对局结束。

如果GM要给某人发装备，那么必然是在游戏内，这个时候，其实和数据库没什么关系，因为你改数据库，装备也不会出现在人的身上，你还是得在游戏里给玩家加道具。

回档时间，就是将所有数据保存起来。

序列化会不会影响游戏的正常进行？这里一定是要将游戏的数据内存dump一份，然后在另一个进程里对某一个固定状态的数据进行持久化。为了便于持久化, 设计一个连续的便于复制的内存结构。
